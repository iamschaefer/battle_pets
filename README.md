# battle_pets

A demo multi-service-backend-project for creating, managing, and battling pets!

## Requirements

This project was built on Ubuntu 16.04 with Rails 5.0.0.1. Other environments are untested. At a minimum, the demo will not look nice in Windows because I make use of the colorize gem.

## Setup

For each project, a set of commands should be run in the given order during setup.

Install rails bins,
`rake rails:update:bin`

Install all gems,
`bundle install`

Load and seed the databases,
`rake db:schema:load db:seed`

Run the test suite,
`bundle exec rspec`

Do style checks,
`bundle exec rubocop`

## Development Demo

For the management service, start it with, 
`rails s -b 0.0.0.0 -p 3000`

For the arena service, start it with,
`rails s -p 3001`

Now you are ready to run the demo!

## Demo

Go to the root directory of the project. The one that has both the Arena and the Services projects. Run the demo.rb file,

```
ruby demo.rb
```

If you have any problems, you might need to set it executable with `chmod +x demo.rb`

Please note that the demo will be slightly inaccurate on the second, or later, runs. If you want to get it back to pristine, then recreate and seed the management service database with, `rake db:schema:load db:seed`

## Design decision notes

I took the approach that the contests were long running, but short enough that polling progress was not necessary. These assumptions let us handle Contest Evaluation with a callback. I let users cancel a contest if it gets stuck in the arena, which is a crude but effective solution. There are a multitude of more robust and complex solutions that could be implemented. My next draft might send a requests to cancel long running jobs on their ArenaService, then request a new evaluation from whatever service the ArenaServiceLocator provides.

## TODOs

First, I'd add authorization for users. Including, but not limited to creating, accepting, and canceling contests as well as an admin panel for the ArenaServices, Pets, and Contests. I'd implement training of pets via leveling up at experience breakpoints so pets would get stronger after more competition. I'd use consistent use of jbuilder for the json API, Further, I'd clean up the controller redirects and rendering. I'd also prune the unused code generated by Rails, like all the HTML templates, though they were nice when I did manual testing. In a production environment, I'd want to see monitoring on the contest evaluation to make sure things weren't getting out of hand.
